
#####################################
#
# pccc.properties - 2017.05.23
#
# @author sf06990s
#
#####################################  

pccc.use.noDB.mode = false

pccc.web.host = http://gate0932.distribution.edf.fr
pccc.web.port = 9090
pccc.web.pcccManager.display.home = /pcccManager/dao?action=select

# pccc.db.uri = jdbc:postgresql://qzobkerqwqeldi:d2e7b96474ab08c3bc3d54869309e1ce3c48e02f19ee2cf7a4f6284e9d0550d4@ec2-79-125-12-27.eu-west-1.compute.amazonaws.com:5432/d7noubomjv5k4o
pccc.db.uri = jdbc:postgresql://ec2-79-125-12-27.eu-west-1.compute.amazonaws.com:5432/d7noubomjv5k4o?sslmode=require
# pccc.db.dbname = d7noubomjv5k4o
pccc.db.username = qzobkerqwqeldi
pccc.db.password = d2e7b96474ab08c3bc3d54869309e1ce3c48e02f19ee2cf7a4f6284e9d0550d4

# pccc.db.host = localhost
# pccc.db.uri = jdbc:postgresql://gate0932/redmine
# pccc.db.port = 5432
# pccc.db.dbname = redmine
# pccc.db.username = redmine
# pccc.db.password = redminepwd


pccc.sql.select.resourceByWorkLocation = SELECT wl.city, email, lastname, firstname, cgt."teamName", pf.name as profession, login \
FROM pccc_schema.resource rs, pccc_schema."workLocation" wl, pccc_schema."capGeminiTeam" cgt, pccc_schema.profession pf \
where wl.pk=rs.worklocation AND cgt.pk=rs.capgeminiteam AND pf.pk=rs."professionFK";
pccc.sql.select.resourceByWorkLocation.aggColumnId = 1
pccc.sql.select.resourceByWorkLocation.nodb = { \
"Grenoble": [ \
{"teamName": "code breakers","firstname": "Manel","city": "Grenoble","profession": "FAKE____VALUE","login": "mabdelfatteh","email": "manel.abdelfatteh@capgemini.com","lastname": "Abdelfatteh"}, \
{"teamName": "code breakers","firstname": "Kossi-Eric","city": "Grenoble","profession": "Développeur Senior","login": "kahialey","email": "kossi-eric.ahialey@capgemini.com","lastname": "Ahialey"}], \
"Lyon": [ \
{"teamName": "code breakers","firstname": "Mathieu","city": "Lyon","profession": "Développeur Senior","login": "mnogaret","email": "mathieu.nogaret@capgemini.fr","lastname": "Nogaret"}, \
{"teamName": "code breakers","firstname": "Sébastien","city": "Lyon","profession": "Architecte","login": "sflacher","email": "sebastien.flacher@capgemini.fr","lastname": "Flacher"}]}

#pccc.sql.select.generic = SELECT id, name, "position", is_default, type, active, \
#  project_id, parent_id, position_name FROM public.${TBL_NAME} limit 10;
# pccc.sql.select.generic.aggColumnId = 5

# ==== Les tags et leurs groupes
pccc.sql.select.tags = SELECT tag.name as tag, "tagGroup".name as tagGroup  \
	FROM pcrc_schema.tag, pcrc_schema."tagGroup"  \
	WHERE tag."tagGroup"="tagGroup".pk;
pccc.sql.select.tags.groupByCol = 2
# pccc.sql.select.tags.response

# ==== Les niveaux d'expertise
pccc.sql.select.expertise = SELECT tag.name, el.name as expertiseLevel \ 
	FROM pcrc_schema.expertise ex, pcrc_schema."expertiseLevel" el, pcrc_schema.tag tag \
	WHERE ex."expertiseLevelFK" = el.pk AND ex.tag = tag.pk;
pccc.sql.select.expertise.groupByCol = 2

# ==== Les compétences des resources
pccc.sql.select.resource = SELECT rs.firstname, rs.lastname, tag.name as tag, el.name as expertiseLevel \
	FROM pcrc_schema.expertise ex, pcrc_schema."expertiseLevel" el, pcrc_schema.tag tag, pcrc_schema.resource rs \ 
	WHERE ex."expertiseLevelFK" = el.pk AND ex.tag = tag.pk AND ex."resourceFK" = rs.pk;
# TODO right value ?
pccc.sql.select.resource.groupByCol = 2

# ==== tags concernés par une contribution
pccc.sql.select.contribution = SELECT tag.name as tag, "tagGroup".name as tagGroup, contrib.synopsis, contrib.interest \
	FROM pcrc_schema.tag, pcrc_schema."tagGroup", pcrc_schema.tag_x_contribution txc, pcrc_schema.contribution contrib \
	WHERE tag."tagGroup"="tagGroup".pk AND txc.tag_fk=tag.pk and txc.contribution_fk=contrib.pk;
# TODO right value ?
pccc.sql.select.contribution.groupByCol = 2


# ====
# ==== HTML templates
# ====
pccc.single.doc.html = \
		<div class="panel-body" id="redmineStrip"> \
			Ajouté par <a class="user active" >CEP WSO2</a> le <a title="${I_CREATED_ON}"> ${I_CREATED_ON} </a> \
			- Mis à jour le <a title="${I_UPDATED_ON}"> ${I_UPDATED_ON} </a> \
		</div> \
		\
        <div class="panel-body" id="singleDocDashboard"> \
	        <div class=\"attributes\"> \
	        <table class=\"list-group col-lg-6 table table-striped\"> \
	        <tr class="status issueatt"> \
	        	<td class="col-lg-3">Statut :</td><td class="col-lg-3">${I_STATUS}</td> \
	        	<td style="width :300px"></td><td style="width:100px"></td> \
	        	<td class="col-lg-3">Début :</td><td class="col-lg-3">${I_START_DATE}</td> \
	        </tr>  \
	        <tr> \
				<td class="col-lg-3">Priorité :</td><td class="col-lg-3">${I_PRIORITY}</td> \
	        	<td style="width :300px"></td><td style="width:100px"></td> \
	        	<td class="col-lg-3">Echéance :</td><td class="col-lg-3">${EMPTY}</td> \
	        </tr>  \
	        <tr> \
	        	<td class="col-lg-3">Assigné à :</td><td class="col-lg-3">${I_ASSIGNED_TO}</td> \
	        	<td style="width :300px"></td><td style="width:100px"></td> \
	        	<td class="col-lg-3">% réalisé :</td><td class="col-lg-3">${UKN}</td> \
	        </tr>  \
	        <tr> \
				<td class="col-lg-3">${EMPTY}</td><td class="col-lg-3">${EMPTY}</td> \
	        	<td style="width :300px"></td><td style="width:100px"></td> \
	        	<td class="col-lg-3">${EMPTY}</td><td class="col-lg-3">${EMPTY}</td> \
	        </tr>  \
	        <tr> \
	        	<td class="col-lg-3">Alert Id :</td><td class="col-lg-3">${CV_FLOW_ID}</td> \
	        	<td style="width :300px"></td><td style="width:100px"></td> \
	        	<td class="col-lg-3">Application :</td><td class="col-lg-3">${CV_APPLICATION}</td> \
	        </tr>  \
	        <tr> \
	        	<td class="col-lg-3">Code :</td><td class="col-lg-3">${CV_CODE}</td> \
	        	<td style="width :300px"></td><td style="width :300px"></td> \
	        	<td class="col-lg-3">Nb Flux :</td><td class="col-lg-3">${CV_NB_FLUX}</td> \
	        </tr> \
	        <tr> \
	        	<td class="col-lg-3">Flow :</td><td class="col-lg-3">${CV_FLOW_NAME}</td> \
	        	<td style="width :300px"></td><td style="width:100px"></td> \
	        	<td class="col-lg-3">Nb Sous-Alertes :</td><td class="col-lg-3">${CV_NB_S_A}</td> \
	        </tr>  \
	        <tr> \
	        	<td class="col-lg-3">Date TRT Appli :</td><td class="col-lg-3">${CV_DATE_TRT}</td> \
	        	<td style="width :300px"></td><td style="width:100px"></td> \
	        	<td class="col-lg-3">Type Partenaire Source :</td><td class="col-lg-3">${SRC_TYPE_PART}</td> \
	        </tr>  \
	        <tr> \
	        	<td class="col-lg-3">Error Code :</td><td class="col-lg-3">${CV_ERROR_CODE}</td> \
	        	<td style="width :300px"></td><td style="width:100px"></td> \
	        	<td class="col-lg-3">Type Partenaire Dest :</td><td class="col-lg-3">${SRC_TYPE_PART}</td> \
	        </tr>  \
	        <tr> \
	        	<td class="col-lg-3">Echange :</td><td class="col-lg-3">${UKN}</td> \
	        	<td style="width :300px"></td><td style="width:100px"></td> \
	        	<td class="col-lg-3">Parent Id :</td><td class="col-lg-3">${PARENT_ID}</td> \
	        </tr>  \
	        </table> \
	        </div> \
        </div> 


pccc.single.doc.parent.html = \
        <div class="parent-div panel-body"> \
	        <div class=\"attributes\"> \
	        <table class="table list issues sort-by-id sort-desc"> \
	        <tr class="status issueatt"> \
	        	<th class="th1">Id</th> \
	        	<th class="th1">Statut</th> \
	        	<th class="th1">Priorité</th> \
	        	<th class="th1">Flow Code</th> \
	        	<th class="th1">Flow Id</th> \
	        	<th class="th1">Statut Flux</th> \
	        	<th class="th1">Message Erreur</th> \
	        	<th class="th1">Source Type Part</th> \
	        	<th class="th1">Dest Type Part</th> \
	        	<th class="th1">Sujet</th> \
	        	<th class="th1">Parent Id</th> \
	        </tr>  \
	        <tr class="${ODD_EVEN}"> \
				<td class="td1"><a href="${IM_HOST}:${IM_PORT}${IM_DISPLAY_URL}&pk_id=${pk_ID}&parent_id=${PARENT_PARENT_ID}">${ISSUE_ID}</a></td> \
#				<td class="td1">${ISSUE_ID}</td> \
				<td class="td1">${I_STATUS}</td> \
				<td class="td1">${I_PRIORITY}</td> \
				<td class="td1">${CV_CODE}</td> \
				<td class="td1">${CV_FLOW_ID}</td> \
				<td class="td1">${CV_FLOW_STATUS}</td> \
				<td class="td1">${CV_ERROR_CODE}</td> \
				<td class="td1">${SRC_TYPE_PART}</td> \
				<td class="td1">${DEST_TYPE_PART}</td> \
				<td class="td1">${I_SUBJECT}</td> \
				<td class="td1">${PARENT_PARENT_ID}</td> \
	        </tr>  \
	        </table> \
	        </div> \
        </div> 
#        <h4>&nbsp;</h1>

pccc.single.doc.child.th = \
	        <tr class="status issueatt"> \
	        	<th class="th1">Id</th> \
	        	<th class="th1">Statut</th> \
	        	<th class="th1">Priorité</th> \
	        	<th class="th1">Flow Code</th> \
	        	<th class="th1">Flow Id</th> \
	        	<th class="th1">Statut Flux</th> \
	        	<th class="th1">Message Erreur</th> \
	        	<th class="th1">Source Type Part</th> \
	        	<th class="th1">Dest Type Part</th> \
	        	<th class="th1">Sujet</th> \
	        	<th class="th1">Parent Id</th> \
	        </tr>  

pccc.single.doc.child.tr = \
	        <tr class="${ODD_EVEN}"> \
				<td class="td1"><a href="${IM_HOST}:${IM_PORT}${IM_DISPLAY_URL}&issue_id=${ISSUE_ID}&parent_id=${CHILD_PARENT_ID}">${ISSUE_ID}</a></td> \
#				<td class="td1">${ISSUE_ID}</td> \
				<td class="td1">${I_STATUS}</td> \
				<td class="td1">${I_PRIORITY}</td> \
				<td class="td1">${CV_CODE}</td> \
				<td class="td1">${CV_FLOW_ID}</td> \
				<td class="td1">${CV_FLOW_STATUS}</td> \
				<td class="td1">${CV_ERROR_CODE}</td> \
				<td class="td1">${SRC_TYPE_PART}</td> \
				<td class="td1">${DEST_TYPE_PART}</td> \
				<td class="td1">${I_SUBJECT}</td> \
				<td class="td1">${CHILD_PARENT_ID}</td> \
	        </tr>  

# $.get(issueMgrUrl,fuction(result){
# 		$('#singleDocDashboard').html(result.data)
# })



